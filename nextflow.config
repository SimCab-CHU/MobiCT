manifest {
    name = 'MobiCT'
    author = ''
    homePage = 'https://github.com/SimCab-CHU/MobiCT'
    description = 'ctDNA Analysis pipeline'
    mainScript = 'MobiCT.nf'
    nextflowVersion = '>=22.04.0'
    version = '1.0.0'
}

// meta parameters
dag.overwrite = true

params {
    // main params
    ref            = "/path/to/referenceGenome.fasta" // If you’re using a VEP cache (e.g. Ensembl’s), use the matching reference FASTA from Ensembl
    fastq          = "/path/to/fastq/files/*_{R1,R2}_001.fastq.gz"
    outdir         = "/path/to/outdir"
    bed            = "/path/to/bedFile" 
    cache          = "" // Path to the VEP cache. If you’re using a VEP cache, use the matching reference FASTA from Ensembl:

    // secondary params
    struct_r1      = "5M2S+T"
    struct_r2      = "5M2S+T"
    filter_fastq   = /^((?!Undetermined).)*$/
    pipeline_report="pipeline_report"
}

profiles {
    slurm {
        process.executor = 'slurm'
    }

    docker {
        docker.enabled = true
        docker.runOptions='-u "$( id -u ):$( id -g )"'
        includeConfig "$baseDir/config/softwares.config"
    }

    singularity {
        singularity.enabled = true
        includeConfig "$baseDir/config/softwares.config"
    }
    conda {
        conda.enabled = true
        includeConfig "$baseDir/config/softwares.config"
    }
    local {
        includeConfig "$baseDir/config/ressources/local.config"
    }
    ci {
        includeConfig "$baseDir/config/ressources/ci.config"
    }
    test{
        params {
            bed    = "$baseDir/Example_data/panel_lung.bed"
            fastq  = "$baseDir/Example_data/*_{R1,R2}_001.fastq.gz"
            outdir = "result_test"
            ref    = "https://ftp.ensembl.org/pub/release-113/fasta/homo_sapiens/dna/Homo_sapiens.GRCh38.dna.chromosome.7.fa.gz"
        }
    }
}

resume = true

timeline {
    enabled = true
    file = "${params.pipeline_report}/execution_timeline_${new Date().format('yyyyMMddHHmmss')}.html"
}

report {
    enabled = true
    file = "${params.pipeline_report}/execution_report_${new Date().format('yyyyMMddHHmmss')}.html"
}

trace {
    enabled = true
    file = "${params.pipeline_report}/execution_trace_${new Date().format('yyyyMMddHHmmss')}.txt"
}

dag {
    enabled = true
    file = "${params.pipeline_report}/pipeline_dag.svg"
}
